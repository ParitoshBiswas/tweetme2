{"ast":null,"code":"import _toConsumableArray from\"F:/Programming/Projects/Twitter-Like-App/tweetme2/tweetme2-web/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"F:/Programming/Projects/Twitter-Like-App/tweetme2/tweetme2-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{apiTweetFeed}from'./lookup';import{Tweet}from\"./detail\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function FeedList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tweetsInit=_useState2[0],setTweetsInit=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tweets=_useState4[0],setTweets=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),nextUrl=_useState6[0],setNextUrl=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),tweetsDidSet=_useState8[0],setTweetsDidSet=_useState8[1];useEffect(function(){var final=_toConsumableArray(props.newTweets).concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[props.newTweets,tweets,tweetsInit]);useEffect(function(){if(tweetsDidSet===false){var handleTweetListLookup=function handleTweetListLookup(response,status){if(status===200){setNextUrl(response.next);setTweetsInit(response.results);setTweetsDidSet(true);}};apiTweetFeed(handleTweetListLookup);}},[tweetsInit,tweetsDidSet,setTweetsDidSet,props.username]);var handleDidRetweet=function handleDidRetweet(newTweet){var updateTweetsInit=_toConsumableArray(tweetsInit);updateTweetsInit.unshift(newTweet);setTweetsInit(updateTweetsInit);var updateFinalTweets=_toConsumableArray(tweets);updateFinalTweets.unshift(tweets);setTweets(updateFinalTweets);};var handleLoadNext=function handleLoadNext(event){event.preventDefault();if(nextUrl!==null){var handleLoadNextResponse=function handleLoadNextResponse(response,status){if(status===200){setNextUrl(response.next);var newTweets=_toConsumableArray(tweets).concat(response.results);setTweetsInit(newTweets);setTweets(newTweets);}};apiTweetFeed(handleLoadNextResponse,nextUrl);}};return/*#__PURE__*/_jsxs(React.Fragment,{children:[tweets.map(function(item,index){return/*#__PURE__*/_jsx(Tweet,{tweet:item,didRetweet:handleDidRetweet,className:\"my-5 py-5 border bg-white text-dark\"},\"\".concat(index,\"-{item.id}\"));}),nextUrl!==null&&/*#__PURE__*/_jsx(\"button\",{onClick:handleLoadNext,className:\"btn btn-outline-primary\",children:\"Load Next\"})]});}","map":{"version":3,"names":["React","useEffect","useState","apiTweetFeed","Tweet","FeedList","props","tweetsInit","setTweetsInit","tweets","setTweets","nextUrl","setNextUrl","tweetsDidSet","setTweetsDidSet","final","newTweets","concat","length","handleTweetListLookup","response","status","next","results","username","handleDidRetweet","newTweet","updateTweetsInit","unshift","updateFinalTweets","handleLoadNext","event","preventDefault","handleLoadNextResponse","map","item","index"],"sources":["F:/Programming/Projects/Twitter-Like-App/tweetme2/tweetme2-web/src/tweets/feed.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\"\r\n\r\nimport { apiTweetFeed } from './lookup'\r\nimport { Tweet } from \"./detail\"\r\n\r\nexport function FeedList(props){\r\n    const [tweetsInit, setTweetsInit] = useState([])\r\n    const [tweets, setTweets] = useState([])\r\n    const [nextUrl, setNextUrl] = useState(null)\r\n    const [tweetsDidSet, setTweetsDidSet] = useState(false)\r\n    useEffect(()=>{\r\n      const final = [...props.newTweets].concat(tweetsInit)\r\n      if (final.length !== tweets.length) {\r\n        setTweets(final)\r\n      }\r\n    }, [props.newTweets, tweets, tweetsInit])\r\n\r\n    useEffect(() => {\r\n      if(tweetsDidSet === false){\r\n        const handleTweetListLookup = (response, status) => {\r\n          if(status === 200){\r\n            setNextUrl(response.next)\r\n            setTweetsInit(response.results)\r\n            setTweetsDidSet(true)\r\n          }\r\n        }\r\n        apiTweetFeed(handleTweetListLookup)\r\n      }   \r\n    }, [tweetsInit, tweetsDidSet, setTweetsDidSet, props.username])\r\n\r\n\r\n    const handleDidRetweet = (newTweet) => {\r\n      const updateTweetsInit = [...tweetsInit]\r\n      updateTweetsInit.unshift(newTweet)\r\n      setTweetsInit(updateTweetsInit)\r\n      const updateFinalTweets = [...tweets]\r\n      updateFinalTweets.unshift(tweets)\r\n      setTweets(updateFinalTweets)\r\n    } \r\n    const handleLoadNext = (event) => {\r\n      event.preventDefault()\r\n      if (nextUrl !== null) {\r\n        const handleLoadNextResponse = (response, status) =>{\r\n          if(status === 200){\r\n            setNextUrl(response.next)\r\n            const newTweets = [...tweets].concat(response.results)\r\n            setTweetsInit(newTweets)\r\n            setTweets(newTweets)\r\n          }\r\n        }\r\n        apiTweetFeed(handleLoadNextResponse, nextUrl)\r\n      }\r\n    }\r\n\r\n    return <React.Fragment>{tweets.map((item, index)=>{\r\n      return <Tweet \r\n        tweet={item}\r\n        didRetweet = {handleDidRetweet}\r\n        className='my-5 py-5 border bg-white text-dark' \r\n        key={`${index}-{item.id}`}/>\r\n    })}\r\n    {nextUrl !== null && <button onClick={handleLoadNext} className=\"btn btn-outline-primary\">Load Next</button>}\r\n    </React.Fragment>\r\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module"}